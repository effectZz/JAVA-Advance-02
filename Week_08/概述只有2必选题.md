### #**2.（必做）**设计对前面的订单表数据进行水平分库分表，拆分 2 个库，每个库 16 张表。并在新结构在演示常见的增删改查操作。代码、sql 和配置文件，上传到 Github。



使用docker 安装；

#### docker 拉取最新版镜像

4X以后的版本更换了新的地址

```
docker pull apache/sharding-proxy
```



##### 下载 mysql-connector-java 驱动

https://repo1.maven.org/maven2/mysql/mysql-connector-java



##### 配置yaml文件

 [config-sharding.yaml](config-sharding.yaml) 

 [server.yaml](server.yaml) 



##### 启动服务

```
docker run -d -v /home/sharding/conf:/opt/sharding-proxy/conf -v /home/sharding/ext-lib:/opt/sharding-proxy/ext-lib --env PORT=3310 -p3310:3310 apache/sharding-proxy:latest
```



##### 进入容器查看日志

```\
cd /opt/sharding-proxy/logs/
tail -f stdout.log
```



此时就可以连接了。

不过此时用navicat连接 测试连接可以连接上，但是打开数据库就报错。；


后面用idea直接可以连接上。。。不知道是不是老师课上的预读的关系。。。


proxy图片是用windows连接的 尝试插入了2条数据已经存在了不同的表里了。；






PS：刚刚不小心把阿里的服务器弄蹦了，用了一年的信息都不小心删掉了，正在提交工单试图恢复。。。

















### **6.（必做）**基于 hmily TCC 或 ShardingSphere 的 Atomikos XA 实现一个简单的分布式事务应用 demo（二选一），提交到 Github。



XA事务练习 在demo文件夹下。



测试插入数据库时异常，则回滚。





程序源于 ： https://www.bianchengquan.com/article/137847.html

